"use strict";(self.webpackChunkbeta_src=self.webpackChunkbeta_src||[]).push([[506],{5056:function(t,e,r){r.r(e),r.d(e,{default:function(){return mt}});var n=r(885),i=r(2791),o=r(4194);var a=r(3967),c=r(7502),s=r(2048),l=r(184),u=function(){return(0,l.jsx)("rect",{className:"trigger",height:"100%",width:"100%",fill:"black",style:{opacity:0}})},d=function(t){var e=t.province,r=t.x,n=t.y,i=(0,a.Z)();return(0,l.jsxs)("svg",{id:"".concat(e,"-center"),width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",x:r,y:n,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M17 32.9998C25.8366 32.9998 33 25.8364 33 16.9999C33 8.1634 25.8366 1 17 1C8.16344 1 1 8.1634 1 16.9999C1 25.8364 8.16344 32.9998 17 32.9998Z",stroke:i.palette.primary.main}),(0,l.jsx)("path",{d:"M17.0064 25.7269C21.8263 25.7269 25.7336 21.8196 25.7336 16.9997C25.7336 12.1797 21.8263 8.27243 17.0064 8.27243C12.1866 8.27243 8.2793 12.1797 8.2793 16.9997C8.2793 21.8196 12.1866 25.7269 17.0064 25.7269Z",fill:i.palette.primary.main}),(0,l.jsx)(u,{})]})},f=r(1413),h=function(t){var e=t.id,r=t.style,n=t.text,i=t.x,o=t.y,c=(0,a.Z)();return(0,l.jsx)("text",{className:"label",style:(0,f.Z)({fill:c.palette.primary.main,fontWeight:900,fontSize:"150%",userSelect:"none"},r),x:i,y:o,id:e,children:n},e)};h.defaultProps={id:void 0};var v,p=h,y=function(t){var e,r=t.provinceMapData,n=t.ownerCountryID,i=t.playerCountryID,o=t.highlightSelection,u=(0,a.Z)(),f=(0,s.T)(),h=(0,s.C)(c.vq),v=(h.user,h.members),y=r.province,m="none",x=0;if(n){var D,I,g=null===(D=v.find((function(t){return t.countryID===Number(n)})))||void 0===D?void 0:D.country;if(g&&"Sea"!==r.type)m=null===(I=u.palette[g])||void 0===I?void 0:I.main,x=.4}if(o&&i){var Z,j,w=null===(Z=v.find((function(t){return t.countryID===i})))||void 0===Z?void 0:Z.country;if(w)m=null===(j=u.palette[w])||void 0===j?void 0:j.main,x=1}return(0,l.jsxs)("svg",{height:r.height,id:"".concat(y,"-province"),viewBox:r.viewBox,width:r.width,x:r.x,y:r.y,children:[(0,l.jsxs)("g",{onClick:function(t){return e=t,void f(c.I9.processMapClick({evt:e,clickProvince:y}));var e},children:[(null===(e=r.texture)||void 0===e?void 0:e.texture)&&(0,l.jsx)("path",{d:r.path,fill:r.texture.texture,id:"".concat(y,"-texture"),stroke:r.texture.stroke,strokeOpacity:r.texture.strokeOpacity,strokeWidth:r.texture.strokeWidth}),(0,l.jsx)("path",{d:r.path,fill:m,fillOpacity:x,id:"".concat(y,"-control-path"),stroke:u.palette.primary.main,strokeOpacity:1,strokeWidth:1})]}),r.centerPos&&(0,l.jsx)("g",{className:"no-pointer-events",children:(0,l.jsx)(d,{province:y,x:r.centerPos.x,y:r.centerPos.y})}),r.labels&&r.labels.map((function(t,e){var n=t.name,i=t.text,o=t.style,a=t.x,c=t.y,s=i,u="".concat(y,"-label-").concat(n);return s||(s=r.abbr),(0,l.jsx)("g",{className:"no-pointer-events",children:(0,l.jsx)(p,{id:u,name:n,style:o,text:s,x:a,y:c},u||e)},u)}))]})},m=function(t){var e=t.provinceMapData,r=e.province;return(0,l.jsx)("svg",{height:e.height,id:"".concat(r,"-province-overlay"),viewBox:e.viewBox,width:e.width,x:e.x,y:e.y,overflow:"visible",children:(0,l.jsx)("path",{d:e.path,fill:"none",fillOpacity:0,id:"".concat(r,"-choice-outline"),stroke:"black",strokeOpacity:1,strokeWidth:5})})},x=r(5824),D=function(t){var e=t.country,r=t.iconState,n=void 0===r?x.Z.NONE:r,i=(0,a.Z)();return(0,l.jsxs)(l.Fragment,{children:[n===x.Z.NONE&&(0,l.jsx)("path",{d:"M25.116 43a2.996 2.996 0 0 1-2.322-1.094 7.488 7.488 0 0 0-1.497-1.348c-.3-.194-.645-.374-1.019-.584a26.407 26.407 0 0 1-4.329-2.966 51.22 51.22 0 0 1-1.768-1.588 2.799 2.799 0 0 1-.928.15 2.996 2.996 0 0 1-1.618-.464c-.644-.435-2.277-1.903-3.265-5.992a14.14 14.14 0 0 1 .509-8.119 2.995 2.995 0 0 1 2.606-1.857h.15c1.123 0 2.262-1.004 2.756-2.726l.36-1.214a3.445 3.445 0 0 1 3.295-2.456c.23-.02.46-.02.69 0h.269a6.171 6.171 0 0 1 12.313 0h.27c.229-.02.46-.02.688 0a3.445 3.445 0 0 1 3.326 2.456l.36 1.214c.494 1.722 1.632 2.726 2.755 2.726h.12a2.996 2.996 0 0 1 2.652 1.857 14.141 14.141 0 0 1 .509 8.12c-.989 4.088-2.621 5.556-3.265 5.99a2.997 2.997 0 0 1-1.678.525 2.799 2.799 0 0 1-.929-.15 51.32 51.32 0 0 1-1.767 1.588 26.403 26.403 0 0 1-4.404 2.936c-.375.21-.72.39-1.019.584a8.24 8.24 0 0 0-1.498 1.348A2.995 2.995 0 0 1 25.116 43Z",fill:"#fff"}),n===x.Z.HOLD&&(0,l.jsx)("path",{d:"M29.495 41.418a7.24 7.24 0 0 0-1.298 1.17A3.996 3.996 0 0 1 25.112 44h-.006l.01-1a2.996 2.996 0 0 1-2.322-1.094l6.701-.488Zm0 0c.187-.12.387-.231.636-.368l.302-.168a27.406 27.406 0 0 0 4.56-3.042l.01-.007.008-.007c.499-.43.964-.843 1.402-1.246a3.996 3.996 0 0 0 2.881-.647c.883-.596 2.639-2.295 3.676-6.584l.002-.008a15.14 15.14 0 0 0-.546-8.693l-.006-.016-.006-.016a3.996 3.996 0 0 0-3.536-2.477l-.02-.001H38.718c-.497 0-1.366-.504-1.796-2.002l-.002-.008-.36-1.214v-.003a4.445 4.445 0 0 0-4.244-3.17 5.045 5.045 0 0 0-.129-.008 7.172 7.172 0 0 0-14.051 0 4.948 4.948 0 0 0-.134.009 4.445 4.445 0 0 0-4.21 3.17v.002l-.36 1.214-.002.008c-.43 1.498-1.299 2.002-1.795 2.002h-.178l-.027.001a3.996 3.996 0 0 0-3.477 2.478l-.006.015-.006.016a15.14 15.14 0 0 0-.545 8.693l.002.008c1.038 4.294 2.797 5.991 3.678 6.586l.012.008.012.008c.644.407 1.39.622 2.151.62m16.244 4.847-7.468 1.13a6.488 6.488 0 0 0-1.284-1.157c-.189-.122-.39-.233-.641-.371l-.308-.171a27.407 27.407 0 0 1-4.49-3.076l-.007-.007c-.5-.43-.965-.843-1.403-1.246a3.799 3.799 0 0 1-.643.05m0 0h.007l-.005-1-.009 1h.007Z",fill:"#fff",stroke:"#000",strokeWidth:4}),n===x.Z.DISLODGED&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{d:"m14.652 38.53-.007-.006a59.03 59.03 0 0 1-1.092-.962 4.799 4.799 0 0 1-.304.008m1.403.96-1.844-1.656c.14.133.284.266.43.4l-.003.296h.014m1.403.96.008.008a28.407 28.407 0 0 0 4.649 3.185l.34.19c.23.125.387.212.54.31.398.274.759.6 1.072.967A4.996 4.996 0 0 0 25.108 45a4.995 4.995 0 0 0 3.848-1.76 6.236 6.236 0 0 1 1.098-.993c.15-.096.305-.181.529-.305l.329-.182a28.416 28.416 0 0 0 4.717-3.147l.017-.014.017-.015c.382-.328.744-.648 1.092-.962a4.996 4.996 0 0 0 3.102-.862c1.119-.757 3-2.685 4.085-7.176l.002-.008.002-.008a16.14 16.14 0 0 0-.582-9.267l-.012-.032-.013-.032a4.996 4.996 0 0 0-4.421-3.097l-.04-.002h-.15c-.021-.005-.106-.032-.241-.162-.192-.184-.438-.538-.603-1.116l-.003-.008-.002-.008-.36-1.214-.001-.006a5.445 5.445 0 0 0-4.542-3.84 8.172 8.172 0 0 0-15.63.004 5.444 5.444 0 0 0-4.511 3.836l-.002.006-.36 1.213-.002.009-.002.008c-.166.578-.411.932-.603 1.116-.135.13-.22.157-.24.162h-.196l-.056.003a4.996 4.996 0 0 0-4.346 3.097l-.013.032-.012.031a16.14 16.14 0 0 0-.581 9.267l.002.008.002.008c1.087 4.499 2.972 6.426 4.09 7.18l.025.016.024.016a4.995 4.995 0 0 0 2.684.774m1.403.96-1.39-1.233.001.273h-.014M38.732 17.14h-.002.002Zm-27.112 0h.003-.003Z",fill:"#fff",stroke:"#B00",strokeWidth:3}),(0,l.jsx)("path",{d:"M13.5 37.379 36.879 14M30.5 8.672 8 31.172M42.5 19.5 20 42",stroke:"#B00",strokeOpacity:.5,strokeWidth:2})]}),(n===x.Z.DISBANDED||n===x.Z.DESTROY)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{d:"m14.652 38.53-.007-.006a59.03 59.03 0 0 1-1.092-.962 4.799 4.799 0 0 1-.304.008m1.403.96-1.844-1.656c.14.133.284.266.43.4l-.003.296h.014m1.403.96.008.008a28.407 28.407 0 0 0 4.649 3.185l.34.19c.23.125.387.212.54.31.398.274.759.6 1.072.967A4.996 4.996 0 0 0 25.108 45a4.995 4.995 0 0 0 3.848-1.76 6.236 6.236 0 0 1 1.098-.993c.15-.096.305-.181.529-.305l.329-.182a28.416 28.416 0 0 0 4.717-3.147l.017-.014.017-.015c.382-.328.744-.648 1.092-.962a4.996 4.996 0 0 0 3.102-.862c1.119-.757 3-2.685 4.085-7.176l.002-.008.002-.008a16.14 16.14 0 0 0-.582-9.267l-.012-.032-.013-.032a4.996 4.996 0 0 0-4.421-3.097l-.04-.002h-.15c-.021-.005-.106-.032-.241-.162-.192-.184-.438-.538-.603-1.116l-.003-.008-.002-.008-.36-1.214-.001-.006a5.445 5.445 0 0 0-4.542-3.84 8.172 8.172 0 0 0-15.63.004 5.444 5.444 0 0 0-4.511 3.836l-.002.006-.36 1.213-.002.009-.002.008c-.166.578-.411.932-.603 1.116-.135.13-.22.157-.24.162h-.196l-.056.003a4.996 4.996 0 0 0-4.346 3.097l-.013.032-.012.031a16.14 16.14 0 0 0-.581 9.267l.002.008.002.008c1.087 4.499 2.972 6.426 4.09 7.18l.025.016.024.016a4.995 4.995 0 0 0 2.684.774m1.403.96-1.39-1.233.001.273h-.014M38.732 17.14h-.002.002Zm-27.112 0h.003-.003Z",fill:"#fff",stroke:"#B00",strokeWidth:4}),(0,l.jsx)("path",{d:"M13.5 37.379 36.879 14M30.5 8.672 8 31.172M42.5 19.5 20 42",stroke:"#B00",strokeOpacity:.5,strokeWidth:3})]}),n===x.Z.BUILD&&(0,l.jsx)("path",{d:"M37.058 36.13a3.496 3.496 0 0 0 1.956-.61c.763-.516 2.457-2.1 3.47-6.288v-.004a14.64 14.64 0 0 0-.526-8.406l-.003-.008-.004-.008a3.497 3.497 0 0 0-3.093-2.168H38.718c-.81 0-1.814-.754-2.276-2.364l-.001-.004-.36-1.214v-.001a3.945 3.945 0 0 0-3.785-2.813 4.532 4.532 0 0 0-.53-.012 6.672 6.672 0 0 0-13.21 0 4.505 4.505 0 0 0-.532.012 3.945 3.945 0 0 0-3.752 2.813v.001l-.36 1.214-.001.004c-.463 1.61-1.466 2.364-2.276 2.364H11.457a3.496 3.496 0 0 0-3.041 2.168l-.003.008-.003.008a14.64 14.64 0 0 0-.527 8.406v.004c1.014 4.191 2.71 5.774 3.472 6.288l.006.004.007.004a3.495 3.495 0 0 0 1.884.542c.268.002.535-.028.795-.09.486.453 1.009.92 1.576 1.407l.004.004a26.91 26.91 0 0 0 4.409 3.02l.292.163c.26.143.486.267.692.4.518.354.985.775 1.39 1.253a3.495 3.495 0 0 0 2.704 1.273m11.944-7.37a3.304 3.304 0 0 1-.797-.09c-.487.453-1.01.919-1.576 1.407l-.009.007a26.906 26.906 0 0 1-4.482 2.989l-.29.16c-.26.143-.483.267-.688.4a7.737 7.737 0 0 0-1.398 1.259 3.496 3.496 0 0 1-2.704 1.238m11.944-7.37-.003-.5.004.5ZM25.114 43.5h-.003l.005-.5.002.5h-.004Z",fill:i.palette[e].light,stroke:i.palette[e].main}),!1,(0,l.jsx)("path",{d:"M37.88 22.25a15.446 15.446 0 0 1-2.807 3.96c-1.24.913-2.62 1.62-4.086 2.092a4.31 4.31 0 0 0 3.243.477s.716 0-.533 1.025a12.453 12.453 0 0 1-4.212 2.808 2.316 2.316 0 0 1-2.808-1.84c-.183-.73-.267-6.837-.323-10.824l2.92-.857a.435.435 0 0 0 .478.155.492.492 0 0 0 .337-.393l.758-.225a.463.463 0 0 0 .714.008.45.45 0 0 0 .1-.246l.646-.197a.407.407 0 0 0 .28-.506l-.322-1.15a.407.407 0 0 0-.506-.281l-.603.28a.464.464 0 0 0-.492-.154.464.464 0 0 0-.323.393L29.57 17a.434.434 0 0 0-.477-.155.449.449 0 0 0-.323.393l-2.373.688v-1.193a2.977 2.977 0 1 0-2.246 0v1.193l-2.373-.688a.45.45 0 0 0-.323-.393.435.435 0 0 0-.477.155l-.773-.225a.463.463 0 0 0-.322-.393.464.464 0 0 0-.492.154l-.646-.196a.407.407 0 0 0-.52.196l-.336 1.123a.407.407 0 0 0 .28.506l.647.197a.45.45 0 0 0 .322.393.464.464 0 0 0 .492-.155l.758.225a.491.491 0 0 0 .337.393.436.436 0 0 0 .477-.155l2.92.857c0 3.987-.14 10.095-.322 10.825a2.317 2.317 0 0 1-2.808 1.839 12.453 12.453 0 0 1-4.212-2.808c-1.25-1.053-.534-1.025-.534-1.025a4.31 4.31 0 0 0 3.243-.477 14.28 14.28 0 0 1-4.071-2.064 15.443 15.443 0 0 1-2.808-3.96 10.446 10.446 0 0 0-.337 5.883c.772 3.187 1.895 3.96 1.895 3.96.025-.763.1-1.523.225-2.275A21.062 21.062 0 0 0 18.52 34.1a31.254 31.254 0 0 0 4.703 3.06A9.911 9.911 0 0 1 25.245 39a9.91 9.91 0 0 1 2.036-1.84 31.248 31.248 0 0 0 4.703-3.06 21.06 21.06 0 0 0 4.128-4.282c.125.752.2 1.512.224 2.274 0 0 1.123-.772 1.896-3.959.45-1.954.328-3.996-.351-5.883Zm-14.376-8.353a1.74 1.74 0 1 1 3.482 0 1.713 1.713 0 0 1-.632 1.404c0-.815-.197-1.404-1.081-1.404-.885 0-1.053.52-1.081 1.404a1.714 1.714 0 0 1-.688-1.404Z",fill:i.palette[e].main,stroke:i.palette[e].main,strokeWidth:1})]})},I=r(4861),g=r(4375);!function(t){t[t.CONVOY=0]="CONVOY",t[t.MOVE=1]="MOVE",t[t.SUPPORT=2]="SUPPORT",t[t.HOLD=3]="HOLD"}(v||(v={}));var Z=v,j=r(2750),w=r(5173);var S=r(5963);function O(t,e){var r,i,o,a;switch(t){case"arrow":var c=e,s=(0,n.Z)(c,4),l=s[0],u=s[1];r=l+.75*(s[2]-l),i=u+.75*(s[3]-u),o=0,a=0;break;case"unit":var d=j.Z[e],f=S.ZP[d].provinceMapData,h=S.ZP[d].unitSlotName;r=f.x,i=f.y,f.unitSlotsBySlotName[h]&&(r+=f.unitSlotsBySlotName[h].x,i+=f.unitSlotsBySlotName[h].y),o=C,a=b;break;case"dislodger":var v=j.Z[e],p=S.ZP[v].provinceMapData,y=S.ZP[v].unitSlotName;r=p.x,i=p.y,p.unitSlotsBySlotName[y]&&(r+=p.unitSlotsBySlotName[y].arrowReceiver.x,i+=p.unitSlotsBySlotName[y].arrowReceiver.y),o=C,a=b;break;default:var m=j.Z[e],x=S.ZP[m].provinceMapData,D=S.ZP[m].unitSlotName;r=x.x,i=x.y,x.unitSlotsBySlotName[D]&&(r+=x.unitSlotsBySlotName[D].arrowReceiver.x,i+=x.unitSlotsBySlotName[D].arrowReceiver.y),o=12,a=12}return[r,i,o,a]}function T(t,e,r,i){var o=O(t,e),a=(0,n.Z)(o,4),c=a[0],s=a[1],l=a[2],u=a[3],d=O(r,i),f=(0,n.Z)(d,4),h=f[0],v=f[1],p=f[2];"unit"!==t&&"dislodger"!==t||(l*=.8,u*=.8);var y=function(t,e,r,n,i,o,a,c){var s=o-i,l=c-a;if(Math.abs(s)<=1e-10&&Math.abs(l)<=1e-10)return{x1:i,x2:o,y1:a,y2:c};var u=Math.atan2(l,s),d=i+e/2*Math.cos(u),f=a+t/2*Math.sin(u),h=o-n/2*Math.cos(u),v=c-r/2*Math.sin(u);return(h-d)*s+(v-f)*l<=1e-10?{x1:i,x2:o,y1:a,y2:c}:{x1:d,x2:h,y1:f,y2:v}}(u,l,f[3],p,c,h,s,v),m=y.x1,x=y.x2;return[m,y.y1,x,y.y2]}function P(){return(0,l.jsx)("animate",{attributeName:"opacity",values:"1.0;0.8;0.25;0.8;1.0",keyTimes:"0; 0.25; 0.5; 0.75; 1.0",dur:"1.0s",repeatCount:"indefinite"})}function k(t,e,r,i,o,a){var c,s,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=T(r,i,o,a),h=(0,n.Z)(f,4),v=h[0],p=h[1],y=h[2],m=h[3];switch(t===Z.CONVOY?c="4 3":t===Z.HOLD&&(c="12 3"),e){case g.Z.MOVE:case g.Z.CONVOY:case g.Z.IMPLIED:case g.Z.IMPLIED_FOREIGN:case g.Z.RETREAT:case g.Z.SUPPORT_HOLD:case g.Z.SUPPORT_MOVE:s=3.5;break;case g.Z.MOVE_FAILED:case g.Z.CONVOY_FAILED:case g.Z.SUPPORT_HOLD_FAILED:case g.Z.SUPPORT_MOVE_FAILED:s=3;break;default:s=3.5}if(d>0){var x=y-v,D=m-p,I=Math.sqrt(x*x+D*D);if(I>0){var j=x/I,S=D/I,O=-j;v+=d*S,p+=d*O}}return(0,l.jsx)("line",{x1:v,y1:p,x2:y,y2:m,markerEnd:"url(#arrowHead__".concat(Z[t],"_").concat(g.Z[e],")"),stroke:w.Z.palette.arrowColors[e].main,strokeWidth:s,strokeDasharray:c,children:u&&P()},"".concat(v,"-").concat(p,"-").concat(y,"-").concat(m,"-").concat(t,"-").concat(e))}var E,M=function(t){var e=t.unit,r=t.unitState,n=t.unitWidth,i=t.unitHeight,o="Fleet"===e.unit.type?50:I.MC,a="Fleet"===e.unit.type?50:I.MW,c=o/2,s=a/2,u=i/a,d="scale(".concat(n/o,", ").concat(u,") translate(-").concat(c,",-").concat(s,")");return(0,l.jsxs)("g",{style:{pointerEvents:"none",overflow:"visible"},transform:d,children:["Fleet"===e.unit.type&&(0,l.jsx)(D,{iconState:r,country:e.country}),"Army"===e.unit.type&&(0,l.jsx)(I.ZP,{iconState:r,country:e.country}),e.drawAsUnsaved&&(0,l.jsx)("animate",{attributeName:"opacity",values:"1.0;0.9;0.5;0.9;1.0",keyTimes:"0; 0.25; 0.5; 0.75; 1.0",dur:"1.0s",repeatCount:"indefinite"})]})},b=75,C=75,A=function(t){var e=t.id,r=t.unit,n=t.unitState,i=(0,a.Z)();return(0,l.jsx)("g",{filter:i.palette.svg.filters.dropShadows[1],height:b,id:e,width:C,style:{overflow:"visible"},children:(0,l.jsx)(M,{unit:r,unitState:n,unitWidth:C,unitHeight:b})})},N=function(t){var e=t.children,r=t.name,n=t.x,i=t.y;return(0,l.jsx)("g",{className:"unit-slot",id:"".concat(r,"-unit-slot"),style:{overflow:"visible"},x:n,y:i,transform:"translate(".concat(n," ").concat(i,")"),children:e})},B=r(3861),L=function(t){var e=t.provinceMapData,r=t.units,n=e.province,i={},o={};return r.filter((function(t){return t.mappedTerritory.province===n})).forEach((function(t){var e;switch(t.drawMode){case B.OA.NONE:e=x.Z.NONE;break;case B.OA.HOLD:e=x.Z.HOLD;break;case B.OA.BUILD:case B.OA.DISLODGING:e=x.Z.NONE;break;case B.OA.DISLODGED:e=x.Z.DISLODGED;break;case B.OA.DISBANDED:e=x.Z.DISBANDED;break;default:e=x.Z.NONE}var r=(0,l.jsx)(A,{id:"".concat(n,"-unit"),unit:t,unitState:e});t.drawMode===B.OA.DISLODGING?o[t.mappedTerritory.unitSlotName]=r:i[t.mappedTerritory.unitSlotName]=r})),(0,l.jsxs)("g",{height:e.height,id:"".concat(n,"-province-overlay"),width:e.width,x:e.x,y:e.y,transform:"translate(".concat(e.x," ").concat(e.y,")"),overflow:"visible",children:[e.unitSlots.filter((function(t){return t.name in i})).map((function(t){var e=t.name,r=t.x,n=t.y;return(0,l.jsx)(N,{name:e,x:r,y:n,children:i[e]},e)})),e.unitSlots.filter((function(t){return t.name in o})).map((function(t){var e=t.name,r=t.arrowReceiver,n="".concat(e,"-dislodging");return(0,l.jsx)(N,{name:n,x:r.x,y:r.y,children:o[e]},n)}))]})},U=r(5230),_=r(9234),F=function(t){var e=t.units,r=t.centersByProvince,n=t.phase,i=t.isLivePhase,o=(0,s.C)(c.BU),a=(0,s.C)(c.Jw),u={};o.data.territoryStatuses.forEach((function(t){u[a.terrIDToProvince[t.id]]=t}));var d=(0,s.C)(c.RY),f=(0,s.C)(c.Jr),h=(0,s.C)(c.vq),v=(h.members,h.user),p=[],x=[];i&&v&&("Diplomacy"===n?d.inProgress?"Move"===d.type?d.viaConvoy?(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]]],x=f.legalViasByUnitID[d.unitID].map((function(t){return S.ZP[t.dest].province}))):(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]]],x=f.legalMoveDestsByUnitID[d.unitID].map((function(t){return S.ZP[t].province}))):"Support"===d.type?d.fromTerrID?(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]],a.terrIDToProvince[d.fromTerrID]],x=f.legalSupportsByUnitID[d.unitID][a.terrIDToProvince[d.fromTerrID]].map((function(t){return t.dest}))):(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]]],x=Object.keys(f.legalSupportsByUnitID[d.unitID])):"Convoy"===d.type&&(d.fromTerrID?(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]],a.terrIDToProvince[d.fromTerrID]],x=Object.keys(f.legalConvoysByUnitID[d.unitID][a.terrIDToProvince[d.fromTerrID]])):(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]]],x=Object.keys(f.legalConvoysByUnitID[d.unitID]))):(p=[],x=[]):"Retreats"===n?d.inProgress?"Retreat"===d.type&&(p=[a.terrIDToProvince[a.unitToTerrID[d.unitID]]],(x=f.legalRetreatDestsByUnitID[d.unitID].map((function(t){return S.ZP[t].province}))).push(p[0])):(p=[],x=Object.keys(f.legalRetreatDestsByUnitID).map((function(t){return a.terrIDToProvince[a.unitToTerrID[t]]}))):"Builds"===n&&(v.member.supplyCenterNo<v.member.unitNo?x=e.filter((function(t){return t.country===v.member.country})).map((function(t){return t.mappedTerritory.province})):v.member.supplyCenterNo>v.member.unitNo&&(x=f.possibleBuildDests.map((function(t){return S.ZP[t].province})))));var D=new Set(p),I=new Set(x),g=Object.values(U.Z).filter((function(t){return!t.playable})).map((function(t){var e;return(0,l.jsx)(y,{provinceMapData:t,ownerCountryID:null===(e=r[t.province])||void 0===e?void 0:e.ownerCountryID,playerCountryID:null===v||void 0===v?void 0:v.member.countryID,highlightSelection:!1},"".concat(t.province,"-province"))})),Z=Object.values(U.Z).filter((function(t){return t.playable&&t.province!==_.Z.NAPLES&&t.province!==_.Z.ROME}));Z.push(U.Z[_.Z.NAPLES]),Z.push(U.Z[_.Z.ROME]);var j=Z.map((function(t){var e,n=D.has(t.province);return(0,l.jsx)(y,{provinceMapData:t,ownerCountryID:null===(e=r[t.province])||void 0===e?void 0:e.ownerCountryID,playerCountryID:null===v||void 0===v?void 0:v.member.countryID,highlightSelection:n},"".concat(t.province,"-province"))})),w=Z.filter((function(t){return I.has(t.province)})).map((function(t){return(0,l.jsx)(m,{provinceMapData:t},"".concat(t.province,"-province-border-highlight"))})),O=Z.map((function(t){return(0,l.jsx)(L,{provinceMapData:t,units:e},"".concat(t.province,"-province-overlay"))}));return(0,l.jsxs)("g",{id:"wD-boardmap-v10.3.4 1",children:[(0,l.jsx)("g",{id:"unplayable",children:g}),(0,l.jsx)("g",{id:"playableProvinces",children:j}),(0,l.jsx)("g",{id:"playableProvinceBorderHighlights",children:w}),(0,l.jsx)("g",{id:"playableProvinceOverlays",children:O})]})},R=r.p+"static/media/capturable-land.379f9cca7138664bf782.jpeg",H=r.p+"static/media/sea-texture.fd82ad462f655f49e1f0.png",V=function(t){switch(t){case Z.SUPPORT:return(0,l.jsx)(l.Fragment,{children:Object.entries(w.Z.palette.arrowColors).map((function(e){var r=(0,n.Z)(e,2),i=r[0],o=r[1];return(0,l.jsxs)("marker",{id:"arrowHead__".concat(Z[t],"_").concat(g.Z[i]),markerWidth:12,markerHeight:8,refX:18,refY:3,orient:"auto",children:[(0,l.jsx)("polygon",{points:"0 0, 6 3, 0 6, 0 5, 4 3, 0 1",fill:o.main}),(0,l.jsx)("polygon",{points:"4 0, 10 3, 4 6, 4 5, 8 3, 4 1",fill:o.main})]},"arrowHead__".concat(Z[t],"_").concat(g.Z[i]))}))});case Z.HOLD:return(0,l.jsx)(l.Fragment,{children:Object.entries(w.Z.palette.arrowColors).map((function(e){var r=(0,n.Z)(e,2),i=r[0],o=r[1];return(0,l.jsx)("marker",{id:"arrowHead__".concat(Z[t],"_").concat(g.Z[i]),markerWidth:90,markerHeight:90,refX:10,refY:45,orient:"auto",markerUnits:"userSpaceOnUse",strokeWidth:4,children:(0,l.jsx)("path",{d:" M 24 72 A 30 30 180 0 1 24 18",stroke:o.main})},"arrowHead__".concat(Z[t],"_").concat(g.Z[i]))}))});default:return(0,l.jsx)(l.Fragment,{children:Object.entries(w.Z.palette.arrowColors).map((function(e){var r=(0,n.Z)(e,2),i=r[0],o=r[1];return(0,l.jsx)("marker",{id:"arrowHead__".concat(Z[t],"_").concat(g.Z[i]),markerWidth:8,markerHeight:8,refX:i===g.Z.IMPLIED_FOREIGN?0:7.1,refY:4,orient:"auto",children:(0,l.jsx)("polygon",{points:"0 0, 8 4, 0 8",fill:o.main})},"arrowHead__".concat(Z[t],"_").concat(g.Z[i]))}))})}},W=function(){return(0,l.jsxs)(l.Fragment,{children:[V(Z.HOLD),V(Z.MOVE),V(Z.SUPPORT)]})},G=r(4942);!function(t){t[t.Army=2]="Army",t[t.Fleet=4]="Fleet",t[t.All=6]="All"}(E||(E={}));var Y,J,z=E,X=(Y={Army:z.Army,Fleet:z.Fleet},(0,G.Z)(Y,z.Army,"Army"),(0,G.Z)(Y,z.Fleet,"Fleet"),J={},(0,G.Z)(J,z.Army,"Build Army"),(0,G.Z)(J,z.Fleet,"Build Fleet"),(0,G.Z)(J,"Build Army",z.Army),(0,G.Z)(J,"Build Fleet",z.Fleet),J),q=r(5469),K=function(t){var e=t.availableOrder,r=t.clickCallback,n=t.country,i=t.canBuild,o=t.province,a=t.unitSlotName,c=t.toTerrID,s=U.Z[o],u=s.x+s.unitSlotsBySlotName[a].x,d=s.y+s.unitSlotsBySlotName[a].y,f=70,h=[],v={width:50,height:50},p={cursor:"pointer"},y=0+f/2,m=y-25;if(d-=70,i&z.Army&&h.push((0,l.jsxs)("g",{style:p,onClick:function(){r(e,z.Army,c)},children:[(0,l.jsx)("circle",{fill:"white",r:25,cx:y,cy:35}),(0,l.jsx)("svg",{x:m,y:10,style:v,children:(0,l.jsx)(I.ZP,{country:n,iconState:x.Z.BUILD})})]},"Army")),i&z.Fleet){var g=0;h.length&&(g=f-10,f=2*f-10),h.push((0,l.jsxs)("g",{style:p,onClick:function(){r(e,z.Fleet,c)},children:[(0,l.jsx)("circle",{fill:"white",r:25,cx:y+g,cy:35}),(0,l.jsx)("svg",{x:m+g,y:10,style:v,children:(0,l.jsx)(D,{country:n,iconState:x.Z.BUILD})})]},"Fleet"))}return u-=f/2,(0,l.jsxs)("svg",{x:u,y:d,children:[(0,l.jsx)("rect",{x:0,y:0,fill:"rgba(0,0,0,.7)",width:f,height:70,rx:10,ry:10}),h]})},Q=function(){var t=(0,s.T)(),e=(0,s.C)(c.Jw),r=(0,s.C)(c.RY),n=(0,s.C)((function(t){return t.game.overview.user.member}));if(!r||"Build"!==r.type)return(0,l.jsx)("div",{});var i=e.terrIDToTerritory[r.toTerrID],o=S.ZP[i],a=o.province,u=o.unitSlotName,d="Coast"===U.Z[a].type?z.All:z.Army;return(0,l.jsx)(K,{availableOrder:r.orderID,canBuild:d,clickCallback:function(r,n,i){var o=i;"Build Army"===X[n]&&(o=e.terrIDToProvinceID[i]),t(c.I9.updateOrdersMeta((0,G.Z)({},r,{saved:!1,update:{type:X[n],toTerrID:o}}))),t(c.I9.resetOrder())},country:q.Z[n.country],province:a,unitSlotName:u,toTerrID:r.toTerrID},"".concat(a,"-").concat(u))},$=r(8624),tt=$.jU?window:null,et=function(t){return!!t.addEventListener},rt=function(t){return!!t.on},nt=function(t,e,r,n){void 0===r&&(r=tt),(0,i.useEffect)((function(){if(e&&r)return et(r)?(0,$.on)(r,t,e,n):rt(r)&&r.on(t,e,n),function(){et(r)?(0,$.S1)(r,t,e,n):rt(r)&&r.off(t,e,n)}}),[t,e,r,JSON.stringify(n)])},it=function(t,e,r,n){void 0===e&&(e=$.ZT),void 0===r&&(r={}),void 0===n&&(n=[t]);var o=r.event,a=void 0===o?"keydown":o,c=r.target,s=r.options,l=(0,i.useMemo)((function(){var r,n="function"===typeof(r=t)?r:"string"===typeof r?function(t){return t.key===r}:r?function(){return!0}:function(){return!1};return function(t){if(n(t))return e(t)}}),n);nt(a,l,c,s)},ot=function(t){var e=(0,i.useState)([!1,null]),r=e[0],n=e[1];return it(t,(function(t){return n([!0,t])}),{event:"keydown"},[r]),it(t,(function(t){return n([!1,t])}),{event:"keyup"},[r]),r};var at=function(t,e){var r=function(){var t=(0,i.useRef)(!0);return t.current?(t.current=!1,!0):t.current}();(0,i.useEffect)((function(){if(!r)return t()}),e)},ct=function(t,e,r,n){void 0===n&&(n=ot);var i=n(t),o=i[0],a=i[1];at((function(){!o&&r?r(a):o&&e&&e(a)}),[o])},st=function(t){var e=t.province,r=t.unitSlotName,n=t.position,i=t.text,o=t.clickHandler,a=U.Z[e];if(!a||!a.unitSlotsBySlotName[r])return(0,l.jsx)("div",{});var c=a.x+a.unitSlotsBySlotName[r].x,s=a.y+a.unitSlotsBySlotName[r].y,u=55+28*i.length*.4,d=0,f=0;if("top"===n)f=-86.5;else if("bottom"===n)f=86.5;else if("left"===n)d=-(u/2+50);else{if("right"!==n)throw Error(n);d=+(u/2+50)}var h=c-u/2+d,v=s-36.5+f;return(0,l.jsx)("svg",{x:h,y:v,filter:"drop-shadow(10px 10px 18px #222222)",onClick:o,children:(0,l.jsxs)("g",{style:{cursor:"pointer"},children:[(0,l.jsx)("rect",{x:0,y:0,fill:"white",width:u,height:73,rx:35,ry:35}),(0,l.jsx)("text",{x:u/2,y:36.5,textAnchor:"middle",alignmentBaseline:"middle",fontFamily:"Roboto",fontSize:28,style:{userSelect:"none"},fill:"black",children:i})]})})},lt=function(t){var e,r,n,i=t.units,o=(0,s.T)(),a=(0,s.C)(c.RY),u=(0,s.C)(c.Jw),d=(0,s.C)(c.Jr),f=i.find((function(t){return t.unit.id===a.unitID})),h=S.ZP[u.unitToTerritory[a.unitID]],v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a.inProgress&&(console.log("Dispatched ".concat(t)),o(c.I9.updateOrder({type:t,viaConvoy:e})))},p="Fleet"===(null===f||void 0===f||null===(e=f.unit)||void 0===e?void 0:e.type)&&"Sea"===h.provinceMapData.type&&d.hasAnyLegalConvoysByUnitID[a.unitID],y="Army"===(null===f||void 0===f||null===(r=f.unit)||void 0===r?void 0:r.type)&&(null===(n=d.legalViasByUnitID[a.unitID])||void 0===n?void 0:n.length)>0;if(ct("h",(function(){return v("Hold")})),ct("d",(function(){return v("Hold")})),ct("m",(function(){return v("Move")})),ct("a",(function(){return v("Move")})),ct("v",(function(){return y&&v("Move","Yes")})),ct("s",(function(){return v("Support")})),ct("c",(function(){return v("Convoy")})),!a.inProgress||a.type||!a.unitID)return(0,l.jsx)("div",{});var m=h.province,x=h.unitSlotName;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(st,{province:m,unitSlotName:x,position:"left",text:"Hold",clickHandler:function(){return v("Hold")}}),(0,l.jsx)(st,{province:m,unitSlotName:x,position:"right",text:"Move",clickHandler:function(){return v("Move")}}),(0,l.jsx)(st,{province:m,unitSlotName:x,position:"top",text:"Support",clickHandler:function(){return v("Support")}}),p&&(0,l.jsx)(st,{province:m,unitSlotName:x,position:"bottom",text:"Convoy",clickHandler:function(){return v("Convoy")}})||(0,l.jsx)("g",{}),y&&(0,l.jsx)(st,{province:m,unitSlotName:x,position:"bottom",text:"Via Convoy",clickHandler:function(){return v("Move","Yes")}})]})};function ut(t,e){var r;return null!==(r=e[t])&&void 0!==r&&r.coastParentID?Number(e[t].coastParentID):t}var dt=function(t){var e=t.orders,r=t.units,i=(t.maps,t.territories),o=t.standoffs,a=[],c={};e.forEach((function(t){c[ut(t.terrID,i)]=t}));var s=new Set;return function(t,e,r){e.filter((function(t){return"Move"===t.type})).forEach((function(e){if(e.toTerrID){var n=S.ZP[r[e.terrID].name].territory,i=S.ZP[r[e.toTerrID].name].territory;t.push(k(Z.MOVE,"Yes"===e.success?g.Z.MOVE:g.Z.MOVE_FAILED,"unit",n,"territory",i,e.drawAsUnsaved)),e.viaConvoy}}))}(a,e,i),function(t,e,r,n){var i={};e.filter((function(t){return"Support hold"===t.type})).forEach((function(t){var e=ut(t.terrID,n),r=t.toTerrID;i[e]=r})),e.filter((function(t){return"Support hold"===t.type})).forEach((function(e){if(e.toTerrID){var o=ut(e.terrID,n),a=S.ZP[n[e.terrID].name].territory,c=e.toTerrID,s=r[c],l=s?S.ZP[n[s.terrID].name].territory:S.ZP[n[e.toTerrID].name].territory,u="Yes"===e.success?g.Z.SUPPORT_HOLD:g.Z.SUPPORT_HOLD_FAILED,d=i[c]===o?6:0;t.push(k(Z.HOLD,u,"unit",a,"unit",l,e.drawAsUnsaved,d))}}))}(a,e,c,i),function(t,e,r,n,i){e.filter((function(t){return"Support move"===t.type})).forEach((function(e){if(e.fromTerrID&&e.toTerrID){var o=S.ZP[n[e.terrID].name].territory,a=!1,c=e.fromTerrID,s=r[c];!s||"Move"!==s.type||s.terrID!==e.fromTerrID&&n[s.terrID].coastParentID!==e.fromTerrID.toString()||s.toTerrID!==e.toTerrID&&n[s.toTerrID].coastParentID!==e.toTerrID.toString()||(a=!0);var l=s?S.ZP[n[s.terrID].name].territory:S.ZP[n[e.fromTerrID].name].territory,u="Yes"===e.success?g.Z.SUPPORT_MOVE:g.Z.SUPPORT_MOVE_FAILED;if(a){var d=S.ZP[n[s.toTerrID].name].territory;t.push(k(Z.SUPPORT,u,"unit",o,"arrow",T("unit",l,"territory",d),e.drawAsUnsaved))}else{var f=S.ZP[n[e.toTerrID].name].territory;t.push(k(Z.SUPPORT,u,"unit",o,"arrow",T("unit",l,"territory",f),e.drawAsUnsaved));var h="".concat(l,"|").concat(f);i.has(h)||(i.add(h),t.push(k(Z.MOVE,g.Z.IMPLIED_FOREIGN,"unit",l,"territory",f,e.drawAsUnsaved)))}}}))}(a,e,c,i,s),function(t,e,r,n,i){e.filter((function(t){return"Convoy"===t.type})).forEach((function(e){if(e.fromTerrID&&e.toTerrID){var o=S.ZP[n[e.terrID].name].territory,a=S.ZP[n[e.fromTerrID].name].territory,c=!1,s=r[e.fromTerrID];!s||"Move"!==s.type||s.terrID!==e.fromTerrID||s.toTerrID!==e.toTerrID&&n[s.toTerrID].coastParentID!==e.toTerrID.toString()||(c=!0);var l="Yes"===e.success?g.Z.CONVOY:g.Z.CONVOY_FAILED,u=S.ZP[n[e.toTerrID].name].territory;if(t.push(k(Z.CONVOY,l,"unit",o,"arrow",T("unit",a,"territory",u),e.drawAsUnsaved)),!c){var d="".concat(a,"|").concat(u);i.has(d)||(i.add(d),t.push(k(Z.MOVE,g.Z.IMPLIED_FOREIGN,"unit",a,"territory",u,e.drawAsUnsaved)))}}}))}(a,e,c,i,s),function(t,e,r){e.filter((function(t){return"Retreat"===t.type})).forEach((function(e){if(e.toTerrID){var n=S.ZP[r[e.terrID].name].territory,i=S.ZP[r[e.toTerrID].name].territory;t.push(k(Z.MOVE,g.Z.RETREAT,"unit",n,"territory",i,e.drawAsUnsaved))}}))}(a,e,i),function(t,e,r){e.filter((function(t){return t.drawMode===B.OA.DISLODGING})).forEach((function(e){if(null!==e.movedFromTerrID){var n=S.ZP[r[e.movedFromTerrID].name].territory,i=S.ZP[r[e.unit.terrID].name].territory;t.push(k(Z.MOVE,g.Z.MOVE,"territory",n,"dislodger",i,!1))}}))}(a,r,i),function(t,e,r){e.filter((function(t){return t.drawMode===B.OA.BUILD})).forEach((function(e){var i=S.ZP[r[e.unit.terrID].name].territory,o=O("unit",i),a=(0,n.Z)(o,4),c=a[0],s=a[1],u=a[2],d=a[3];t.push((0,l.jsx)("circle",{cx:c,cy:s,r:1.4*(u+d)/4,fill:"none",stroke:"rgb(0,150,0)",strokeWidth:.05*(u+d),children:e.drawAsUnsaved&&P()},"build-circle-".concat(i)))}))}(a,r,i),function(t,e,r){e.filter((function(t){return t.drawMode===B.OA.DISBANDED})).forEach((function(e){var i=S.ZP[r[e.unit.terrID].name].territory,o=O("unit",i),a=(0,n.Z)(o,4),c=a[0],s=a[1],u=(a[2],a[3],38);t.push((0,l.jsx)("line",{x1:c-u,y1:s-u,x2:c+u,y2:s+u,stroke:"red",strokeWidth:4,children:e.drawAsUnsaved&&P()},"disbandmark-".concat(i,"-1"))),t.push((0,l.jsx)("line",{x1:c+u,y1:s-u,x2:c-u,y2:s+u,stroke:"red",strokeWidth:4,children:e.drawAsUnsaved&&P()},"disbandmark-".concat(i,"-2")))}))}(a,r,i),function(t,e){e.forEach((function(e){var r=e.province,i=U.Z[r].rootTerritory;if(i){var o=O("territory",i),a=(0,n.Z)(o,4),c=a[0],s=a[1],u=(a[2],a[3],15);t.push((0,l.jsx)("line",{x1:c-u,y1:s-u,x2:c+u,y2:s+u,stroke:"tomato",strokeWidth:6},"standoffmark-".concat(r,"-1"))),t.push((0,l.jsx)("line",{x1:c+u,y1:s-u,x2:c-u,y2:s+u,stroke:"tomato",strokeWidth:6},"standoffmark-".concat(r,"-2"))),e.attemptedMoves.forEach((function(e){var r=(0,n.Z)(e,2),i=r[0],o=r[1];t.push(k(Z.MOVE,g.Z.MOVE_FAILED,"unit",i,"territory",o,!1))}))}}))}(a,o),(0,l.jsx)("g",{id:"arrows",children:a})},ft=i.forwardRef((function(t,e){var r=t.units,n=t.phase,i=t.orders,o=t.maps,a=t.territories,c=t.centersByProvince,s=t.standoffs,u=t.isLivePhase;return(0,l.jsxs)("svg",{id:"map",fill:"none",ref:e,style:{width:"100%",height:"100%"},xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("g",{id:"full-map-svg",children:(0,l.jsxs)("g",{id:"container",children:[(0,l.jsx)(F,{units:r,centersByProvince:c,phase:n,isLivePhase:u}),(0,l.jsx)(dt,{orders:i,units:r,maps:o,territories:a,standoffs:s}),u&&(0,l.jsx)(Q,{}),u&&(0,l.jsx)(lt,{units:r})]})}),(0,l.jsxs)("defs",{children:[(0,l.jsx)("pattern",{id:"capturable-land",patternUnits:"userSpaceOnUse",width:"1546",height:"1384",children:(0,l.jsx)("image",{href:R,x:"0",y:"0",width:"1546",height:"1384"})}),(0,l.jsx)("pattern",{id:"sea-texture",patternUnits:"userSpaceOnUse",width:"1546",height:"1384",children:(0,l.jsx)("image",{href:H,x:"0",y:"0",width:"1966",height:"1615"})}),W(),(0,l.jsxs)("pattern",{id:"neutral-land-texture",width:"30",height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse",children:[(0,l.jsx)("rect",{x:"0",y:"0",width:"30",height:"10",style:{fill:"#C5BFBE"}}),(0,l.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:"#B5AFAE",strokeWidth:30}})]}),(0,l.jsxs)("filter",{id:"selectionGlow",height:"120%",width:"120%",x:"-10%",y:"-10%",children:[(0,l.jsx)("feMorphology",{operator:"dilate",radius:"5",in:"SourceAlpha",result:"thickerSource"}),(0,l.jsx)("feGaussianBlur",{stdDeviation:"8",in:"thickerSource",result:"blurredSource"}),(0,l.jsx)("feFlood",{floodColor:"rgb(100,200,255)",result:"glowColor"}),(0,l.jsx)("feComposite",{in:"glowColor",in2:"blurredSource",operator:"in",result:"selectionGlowGlow"})]}),(0,l.jsxs)("filter",{id:"choiceGlow",height:"120%",width:"120%",x:"-10%",y:"-10%",children:[(0,l.jsx)("feMorphology",{operator:"dilate",radius:"1",in:"SourceAlpha",result:"thickerSource"}),(0,l.jsx)("feGaussianBlur",{stdDeviation:"6",in:"thickerSource",result:"blurredSource"}),(0,l.jsx)("feFlood",{floodColor:"rgb(255,255,255)",result:"glowColor"}),(0,l.jsx)("feComposite",{in:"glowColor",in2:"blurredSource",operator:"in",result:"choicesGlowGlow"})]})]})]})})),ht=i.memo(ft),vt=r(3622),pt=r(8539),yt={DESKTOP:[.45,3],MOBILE_LG:[.32,1.6],MOBILE_LG_LANDSCAPE:[.3,1.6],MOBILE:[.32,1.6],MOBILE_LANDSCAPE:[.27,1.6],TABLET:[.6275,3],TABLET_LANDSCAPE:[.6,3]},mt=function(t){var e=t.units,r=t.phase,a=t.orders,u=t.maps,d=t.territories,f=t.centersByProvince,h=t.isLivePhase,v=t.standoffs,p=i.useRef(null),y=(0,vt.Z)(),m=(0,n.Z)(y,1)[0],x=(0,s.T)(),D=(0,s.C)(c.mT),I=function(t){return yt[t]}((0,pt.Z)(m)),g=(0,n.Z)(I,2),Z=g[0],j=g[1];return"Error"===r?(0,l.jsx)("div",{}):(i.useLayoutEffect((function(){if(p.current){var t=o.Ys(p.current),e=t.select("#container"),r=function(t,e,r,n){var i=r,o=t.height*r;o<n.height&&(i=r+(1-o/n.height));var a,c=e.height*i,s=e.y*i,l=e.width*i,u=e.x*i,d=Math.abs(n.width-l),f=Math.abs(d/2),h=Math.abs(n.height-c),v=Math.abs(h/2),p=(t.y+t.height-(e.y+e.height))*i;return n.height>=c?(a=-s+v,v>p&&(a+=v-p)):a=-s-v,{scale:i,x:n.width>=l?-u+f:-u-f,y:a}}(e.node().getBBox(),t.select("#playableProvinces").node().getBBox(),Z,m),n=r.scale,i=r.x,a=r.y,c=o.sPX().translateExtent([[0,0],[6010,3005]]).scaleExtent([n,j]).clickDistance(3).on("zoom",(function(t){var r=t.transform;e.attr("transform",r)}));t.on("wheel",(function(t){return t.preventDefault()})).call(c).call(c.transform,o.CRH.translate(i,a).scale(n)).on("dblclick.zoom",null)}}),[p,m]),i.useEffect((function(){setTimeout((function(){x(c.I9.updateOrdersMeta(D))}),500)}),[]),i.useEffect((function(){var t=function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),x(c.I9.resetOrder()))};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}})),(0,l.jsx)("div",{style:{width:m.width,height:m.height},children:(0,l.jsx)(ht,{ref:p,units:e,phase:r,orders:a,maps:u,territories:d,centersByProvince:f,standoffs:v,isLivePhase:h})}))}}}]);
//# sourceMappingURL=506.81948194.chunk.js.map